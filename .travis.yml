dist: trusty
sudo: required
shallow_clone: true
services:
  - docker
language: csharp
mono: none
dotnet: 2.1.4
install:
  - cd "$TRAVIS_BUILD_DIR/scripts"
  - npm install
script:
  - cd "$TRAVIS_BUILD_DIR"
  - node scripts/build/build.js
  - node scripts/test/test.unit.js
  - node scripts/test/test.integration.js
deploy:
  provider: script
  script:
    - cd "$TRAVIS_BUILD_DIR"
    - node scripts/deploy/travis-ci/predeploy-staging.js
    - node scripts/deploy/deploy-docker-compose.js
  skip_cleanup: true
  on:
    branch: master
notifications:
  email: false

# Web Interface settings:

## Disable "Build pushed pull requests"

## Environment Variables:
#### BORZOO_DOCKER_SETTINGS: '{ "host":"example.org:1234", "ca":"", "cert":"", "key":"" }'
#### BORZOO_APP_SETTINGS: '{ "env":"Staging", "settings":{ /* contents of appsettings.json */ } }'