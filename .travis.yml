dist: trusty
sudo: required
language: node_js
node_js:
  - node
branches:
  except:
  - gh-pages
notifications:
  email: false
services:
  - docker
install:
  - docker pull microsoft/dotnet:2.1-sdk
  - cd ci && npm install && cd ..

script:
  - node ci/build && node ci/test

deploy:
  provider: script
  skip_cleanup: true
  script: node deploy/deploy-heroku.js


# Disable "Build pushed pull requests"


# env:
#   APP_SETTINGS_JSON: A mapping of environment to the content of appsettings.{ENV}.json file.
#       '{ "Staging": { /* contents of appsettings.Staging.json */ }, "Production": { /* ... */ } }'
### if deploying to Heroku:
#   HEROKU_APP_NAME_JSON: A mapping of environment to the name of app on Heorku.
#       '{ "Staging": "foo", "Production": "bar" }'
#   HEROKU_USERNAME: Heroku user name (or email address)
#   HEROKU_AUTH_TOKEN: Herorku API access token
### if deploying using Docker Compose:
#   DOCKER_SETTINGS_JSON: '{ "host":"example.org:1234", "ca":"", "cert":"", "key":"" }'
